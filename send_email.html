<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adex Logistique - Envoi des Emails de Relance</title>
    <link rel="stylesheet" href="CSS.css">
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var sendEmailsForm = document.getElementById('sendEmailsForm');
            var responseSection = document.getElementById('response');
    
            sendEmailsForm.addEventListener('submit', function(event) {
                event.preventDefault();
    
                var formData = new FormData(sendEmailsForm);
    
                var xhr = new XMLHttpRequest();
                xhr.open('POST', 'send_email.php', true);
                xhr.onload = function() {
                    if (xhr.status >= 200 && xhr.status < 400) {
                        responseSection.innerHTML = xhr.responseText;
                    } else {
                        console.error('Erreur lors de la requête : ' + xhr.status);
                        responseSection.innerHTML = '<p>Une erreur est survenue lors de l\'envoi du formulaire.</p>';
                    }
                };
                xhr.onerror = function() {
                    console.error('Erreur réseau.');
                    responseSection.innerHTML = '<p>Erreur réseau lors de l\'envoi du formulaire.</p>';
                };
                xhr.send(formData);
            });
        });
        </script>
</head>
<body>
    <header>
        <h1>Adex Logistique - Envoi des Emails de Relance</h1>
    </header>
    <nav>
        <a href="index.php">Accueil</a>
        <a href="send_emails.php">Envoyer des Relances</a>
    </nav>
    <main>
        <section>
            <h3>Envoyer des Emails de Relance</h3>
            <form id="sendEmailsForm" method="post" action="send_email.php">
                <input type="submit" name="sendEmails" value="Envoyer les relances">
            </form>
        </section>
        <section id="responseSection">
            <div id="response">
                <!-- Messages de réponse s'afficheront ici -->
            </div>
        </section>
        <section>
            <h3>Ajouter un client manuellement</h3>
            <form id="addClientForm" method="post">
                <label for="societe">Société :</label>
                <input type="text" id="societe" name="societe" required><br>
        
                <label for="agence">Agence :</label>
                <input type="text" id="agence" name="agence"><br>
        
                <label for="code">Code :</label>
                <input type="text" id="code" name="code" required><br>
        
                <label for="nom">Nom :</label>
                <input type="text" id="nom" name="nom" required><br>
        
                <label for="adresse">Adresse :</label>
                <input type="text" id="adresse" name="adresse"><br>
        
                <label for="complement">Complément :</label>
                <input type="text" id="complement" name="complement"><br>
        
                <label for="code_postal">Code Postal :</label>
                <input type="text" id="code_postal" name="code_postal"><br>
        
                <label for="ville">Ville :</label>
                <input type="text" id="ville" name="ville"><br>
        
                <label for="pays">Pays :</label>
                <input type="text" id="pays" name="pays"><br>
        
                <label for="nom_court">Nom Court :</label>
                <input type="text" id="nom_court" name="nom_court"><br>
        
                <label for="ville_libre">Ville Libre :</label>
                <input type="text" id="ville_libre" name="ville_libre"><br>
        
                <label for="cp_codex">CP Codex :</label>
                <input type="text" id="cp_codex" name="cp_codex"><br>
        
                <label for="telephone">Téléphone :</label>
                <input type="text" id="telephone" name="telephone"><br>
        
                <label for="fax">Fax :</label>
                <input type="text" id="fax" name="fax"><br>
        
                <label for="courriel">Courriel :</label>
                <input type="email" id="courriel" name="courriel"><br>
        
                <label for="num_intracomm">n° IntraComm :</label>
                <input type="text" id="num_intracomm" name="num_intracomm"><br>
        
                <label for="num_siret">n° SIRET :</label>
                <input type="text" id="num_siret" name="num_siret"><br>
        
                <label for="code_regroupement">Code Regroupement :</label>
                <input type="text" id="code_regroupement" name="code_regroupement"><br>
        
                <label for="dh_creation">D/H Création :</label>
                <input type="text" id="dh_creation" name="dh_creation"><br>
        
                <label for="creation_par">Création par :</label>
                <input type="text" id="creation_par" name="creation_par"><br>
        
                <label for="dh_modif">D/H Modif :</label>
                <input type="text" id="dh_modif" name="dh_modif"><br>
        
                <label for="modif_par">Modif par :</label>
                <input type="text" id="modif_par" name="modif_par"><br>
        
                <input type="submit" name="addClient" value="Ajouter le client">
            </form>
        </section>
        <section id="addClientResponse">
            <div id="addClientMessage">
                <!-- Messages de réponse s'afficheront ici -->
            </div>
        </section>
    </main>
    <footer>
        <p>&copy; 2024 Adex Logistique. Tous droits réservés.</p>
    </footer>
</body>
</html>
